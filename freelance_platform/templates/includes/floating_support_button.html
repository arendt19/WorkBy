{% load i18n %}

<!-- Кнопка доступа к боту поддержки (обход конфликтов) -->
<div id="ai-support-button" class="position-fixed" style="bottom: 30px; right: 30px; z-index: 9999; display: none;">
    <a href="{% url 'chat:support_chat' %}" class="btn btn-danger btn-lg rounded-circle shadow-lg d-flex align-items-center justify-content-center" style="width: 75px; height: 75px;" title="{% trans 'AI Support' %}">
        <i class="fas fa-robot fs-2"></i>
    </a>
</div>

<script>
    // Скрипт для добавления кнопки после полной загрузки DOM и всех стилей
    document.addEventListener('DOMContentLoaded', function() {
        // Задержка для уверенности, что все остальные элементы уже загружены
        setTimeout(function() {
            // Показываем кнопку
            document.getElementById('ai-support-button').style.display = 'block';
            
            // Добавляем анимацию пульсации
            var button = document.querySelector('#ai-support-button .btn');
            button.style.animation = 'support-button-pulse 2s infinite';
            
            // Добавляем стили анимации, если их ещё нет
            if (!document.getElementById('support-button-styles')) {
                var style = document.createElement('style');
                style.id = 'support-button-styles';
                style.innerHTML = `
                    @keyframes support-button-pulse {
                        0% {
                            box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.7);
                            transform: scale(1);
                        }
                        70% {
                            box-shadow: 0 0 0 15px rgba(220, 53, 69, 0);
                            transform: scale(1.05);
                        }
                        100% {
                            box-shadow: 0 0 0 0 rgba(220, 53, 69, 0);
                            transform: scale(1);
                        }
                    }
                `;
                document.head.appendChild(style);
            }
        }, 1000); // Задержка 1 секунда
    });
</script>
